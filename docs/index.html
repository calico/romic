<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R for High-Dimensional 'Omic Data • romic</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="R for High-Dimensional 'Omic Data">
<meta property="og:description" content="Represents high-dimensional data as tables of features, samples and measurements, and a design list for tracking the meaning of individual variables. Using this format, filtering, normalization, and other transformations of a dataset can be carried out in a flexible manner. romic takes advantage of these transformations to create interactive shiny apps for exploratory data analysis such as an interactive heatmap. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">romic</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/romic.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<p>ROMIC standardizes the formatting of genomic data to open up general visualizations approaches which can be used for exploratory data analysis (EDA).</p>
<!-- badges: start -->
<p><a href="https://github.com/calico/romic/actions"><img src="https://github.com/calico/romic/workflows/R-CMD-check/badge.svg" alt="R build status"></a> <a href="https://github.com/calico/romic/actions"><img src="https://github.com/calico/romic/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a> <!-- badges: end --></p>
<div id="package-setup" class="section level2">
<h2 class="hasAnchor">
<a href="#package-setup" class="anchor"></a>Package Setup</h2>
<p>To install <em>romic</em> run the following code in R:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span>

<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span>
  <span class="st">"calico/romic"</span>,
  dependencies <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span></code></pre></div>
</div>
<div id="concept" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#concept" class="anchor"></a>Concept</h1></div>
<p><img src="https://github.com/calico/romic/blob/main/assets/romic_art/romic.png" alt="Romic Logo"></p>
<p>Romic structures high-dimensional ’omic datasets using a flexible format that can easily be modified using tidyverse-like verbs and visualized using ggplot. These operations can be dynamically applied using romic’s shiny applications and modules to support exploratory data analysis and summarize results.</p>
<div id="data-model" class="section level2">
<h2 class="hasAnchor">
<a href="#data-model" class="anchor"></a>Data Model</h2>
<p>`Omic datasets are constructed by measuring a common set of features (transcripts, metabolites, ) across a set of samples. With such data, we could represent the same data using several different format:</p>
<ul>
<li>Wide <span class="emoji" data-emoji="warning">⚠️</span>:
<ul>
<li>A matrix of I features x J samples including extra columns for feature-level attributes and extra rows for sample-level attributes.</li>
<li>While ’omic data is often shared in this format, it is problematic for three reasons.
<ol>
<li>Each column of a dataframe has the same classes, and all values of a matrix have a common class. If sample-level variables are provided (such as the experimental design) then they would need to be tied to column attributes which are difficult to work with, although this is easier with specialized data structures such as H5AD.</li>
<li>Matrix data is difficult to deal with. We would have to track which columns are measurements and which are feature attributes, and if we wanted to say select a subset of features and color them by a sample attribute, it would be colossal pain.</li>
<li>If we have two or more observation-level attributes, such as raw, normalized and log-transformed measurements then the information cannot nicely be formatted as a matrix.</li>
</ol>
</li>
</ul>
</li>
<li>Tidy <span class="emoji" data-emoji="star">⭐</span>:
<ul>
<li>A table with one row for each measurement (I x J)</li>
<li>Each measurement is associated with the attributes of its corresponding features and samples. This is helpful for measurement-level operations such as plotting informed by the experimental design.</li>
<li>A couple of downsides of this representation are that:
<ol>
<li>Feature- and sample-level attributes are highly duplicated so the representation is not particularly compact.</li>
<li>Because feature- and sample attributes are duplicated, its difficult apply feature- or sample-level manipulation. For example, adding a gene’s GO category would involve separately adding it for each measurement of that gene. This invariably adds extra complexity and time to the code and there is a risk that an inconsistent output is produced (such as a gene being associated with different GO categories depending on which measurement it is).</li>
</ol>
</li>
</ul>
</li>
<li>Triple <span class="emoji" data-emoji="sparkles">✨</span>:
<ul>
<li>Represent a dataset as three tables:
<ul>
<li>Features (I rows) - All unique features and feature-level attributes</li>
<li>Samples (J rows) - All unique samples and sample-level attributes</li>
<li>Measurements (I x J rows) - One row per observation. This will look like the tidy table above except the only feature- and sample-level attributes are the feature primary key (a variable which uniquely defines a feature) and the sample primary key (a variable which uniquely defines a sample)</li>
</ul>
</li>
<li>This representation is powerful because feature- or sample-level attributes can be directly manipulated, and attributes of interest can be added to measurements on demand.</li>
<li>The major downside of this representation is the need for a more complex list data structure and the need to perform joins to pull in relevant information.</li>
</ul>
</li>
</ul>
<p><img src="https://github.com/calico/romic/blob/main/assets/romic_summary.png" alt="Romic Functions"></p>
<p>Romic harnesses the tidy and the triple omic representations through the <strong>tidy_omic</strong> and <strong>triple_omic</strong> S3 classes. These formats each have their own pros and cons, and one is generally better than the other depending on the task. Taking advantage of this fact, tidy and triple omic objects can readily be interconverted by tracking a dataset’s <strong>design</strong>.</p>
<p>The design reflects the schema of a triple_omic object, and as a result, how it can be naturally rearranged to- and from- a tidy_omic. It is stored as simple list:</p>
<ul>
<li>feature_pk (str): variable which uniquely defines a feature</li>
<li>sample_pk (str): variable which uniquely defines a sample</li>
<li>features (table): variables and types of feature attributes</li>
<li>samples (table): variables and types of sample attributes</li>
<li>measurements (table): variables and types of measurement attributes</li>
</ul>
<p>Since tidy_omic and triple_omic representation can readily be inter-converted, many functions can use a tidy_omic or triple_omic input, converting between the formats as needed and returning the same type of object as the input if desired. This T* Omic abstraction is referred to through the <strong>tomic</strong> S3 class.</p>
</div>
<div id="modifying-tomics" class="section level2">
<h2 class="hasAnchor">
<a href="#modifying-tomics" class="anchor"></a>Modifying Tomics</h2>
<p>Tidy and triple omic objects’ core data are tables that can be directly manipulated and updated using conventional means (as long as the design is kept up to date). But, romic also includes methods which simplify working with this format and applying some common manipulations of high-dimensional data. Tidy and triple omics’ core data are “tall data”, so romic takes advantage of the tidyverse suite of packages for working with tall tabular data. Two common operations for manipulating tidy data are filtering and mutating results.</p>
<p><strong>filter_tomic</strong> filters any table in a triple_omic to a range of values, values of interest, or based on a quosure (<strong>filter_tomic</strong>). Mutates are more varied, and include centering measurements (<strong>center_tomic</strong>), ordering features or samples as factors (<strong>sort_tomic</strong>) and adding lower-dimensional sample embedding (<strong>add_pca_loadings</strong>)</p>
</div>
<div id="visualizations" class="section level2">
<h2 class="hasAnchor">
<a href="#visualizations" class="anchor"></a>Visualizations</h2>
<p>Romic provides several methods which can provide both a high-level summary of a dataset as well as interrogate specific features.</p>
<ul>
<li>
<strong>plot_heatmap</strong> creates a ggplot-based heatmap to visualize a complete data matrix</li>
<li>
<strong>plot_univariate</strong> create a histogram of a numeric feature present in features, samples or measurements</li>
<li>
<strong>plot_bivariate</strong> creates a bivariate visualization of features, samples or measurements (including feature and sample attributes). If two numeric features are used then a scatter plot is created, while if the x-axis variables is categorical, a boxplot is created. Many types of visualizations can be created using this approach:
<ul>
<li>plotting PC1 ~ PC2 in the samples tables</li>
<li>creating a volcano plot of feature significance and effect sizes</li>
<li>plotting measurement magnitudes for specific features with elements of the experimental design on the y-axis.</li>
</ul>
</li>
</ul>
<p>The univariate and bivariate plots are simple, but they can do a lot when combined with tomics flexible data manipulation and shiny interactivity.</p>
</div>
<div id="interactive-analysis-with-shiny" class="section level2">
<h2 class="hasAnchor">
<a href="#interactive-analysis-with-shiny" class="anchor"></a>Interactive Analysis with Shiny</h2>
<p>Taking advantage of Romic’s flexible representation and manipulation of high-dimensional datasets, romic bundles a number of R Shiny Modules which can be composed into powerful Shiny Apps.</p>
<p>The main two apps are:</p>
<ul>
<li>
<strong>app_heatmap</strong> Filter a tomic to data of interest, separate features or samples based on facets and organize results based on categories or hierarchical clustering.</li>
<li>
<strong>app_flow</strong> Create a bivariate or univariate plot of a features, samples or measurements, selected points of interest and use this to filter or tag the tomic data your working with. Then you can use this object going forward. This makes it easy to selected features of interest and then look at their patterns of variation.</li>
</ul>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sean Hackett <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9553-4341" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Calico Life Sciences LLC <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Sean Hackett, Calico Life Sciences LLC.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
